#!/usr/bin/env python
import logging

from skeleton.py_daemonize import (daemonize, load_config, schedule, 
                                   wait_for_shutdown, install_signal_handlers,
                                   configure_logging)
from skeleton import perform_useless_task

LOG = logging.getLogger(__name__)

daemonize('/var/run/example.pid', '/var/log/example_daemn.log')

configure_logging()
install_signal_handlers()

config = load_config()

LOG.info('Starting')

schedule(lambda: perform_useless_task(config['server']['host']),
         period=config['period'], run_now=False)


wait_for_shutdown()
