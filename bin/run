#!/usr/bin/env python
import logging

from skeleton.py_daemonize import (daemonize, load_config, schedule, 
                                   wait_for_shutdown, install_signal_handlers,
                                   configure_logging)
from skeleton import send_useless_info_to_server

LOG = logging.getLogger(__name__)

daemonize()

configure_logging()
install_signal_handlers()

config = load_config()

LOG.info('Starting')

schedule(lambda: send_useless_info_to_server(config['server']['host']),
         period=config['period'], run_now=True)


wait_for_shutdown()
